{"ast":null,"code":"import { db } from '../../config/firebase';\nimport { setCartItems, setIsProductsLoaded } from '../reducers/cartReducer';\nimport { doc, getDoc, setDoc } from 'firebase/firestore';\nimport { toast } from 'react-toastify';\nexport const addProductsToCart = (product, userId) => async dispatch => {\n  try {\n    const userCartRef = doc(db, 'carts', userId);\n    const cartDoc = await getDoc(userCartRef);\n    let updatedCart = [];\n    if (cartDoc.exists()) {\n      const existingCart = cartDoc.data().items || [];\n      const existingProductIndex = existingCart.findIndex(item => item.id === product.id);\n      if (existingProductIndex !== -1) {\n        existingCart[existingProductIndex].quantity += 1;\n        updatedCart = existingCart;\n      } else {\n        updatedCart = [...existingCart, {\n          ...product,\n          quantity: 1\n        }];\n      }\n    } else {\n      updatedCart = [{\n        ...product,\n        quantity: 1\n      }];\n    }\n    await setDoc(userCartRef, {\n      items: updatedCart\n    });\n    dispatch(setCartItems(updatedCart));\n    toast.success(\"Product added to cart!\");\n  } catch (error) {\n    console.error(\"Error adding to cart: \", error);\n    toast.error(\"Failed to add product to cart\");\n  }\n};\nexport const removeProductFromCart = productId => async (dispatch, getState) => {\n  try {} catch (error) {}\n};","map":{"version":3,"names":["db","setCartItems","setIsProductsLoaded","doc","getDoc","setDoc","toast","addProductsToCart","product","userId","dispatch","userCartRef","cartDoc","updatedCart","exists","existingCart","data","items","existingProductIndex","findIndex","item","id","quantity","success","error","console","removeProductFromCart","productId","getState"],"sources":["C:/Users/wadhe/OneDrive/Desktop/study/complete placment/Redux/project/scaffold/src/redux/actions/cartActions.js"],"sourcesContent":["import { db } from '../../config/firebase';\r\nimport { setCartItems, setIsProductsLoaded } from '../reducers/cartReducer';\r\nimport { doc, getDoc, setDoc } from 'firebase/firestore';\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\nexport const addProductsToCart = (product, userId) => async (dispatch) => {\r\n  try {\r\n    const userCartRef = doc(db, 'carts', userId);\r\n    const cartDoc = await getDoc(userCartRef);\r\n    let updatedCart = [];\r\n\r\n    if (cartDoc.exists()) {\r\n      const existingCart = cartDoc.data().items || [];\r\n      const existingProductIndex = existingCart.findIndex(item => item.id === product.id);\r\n\r\n      if (existingProductIndex !== -1) {\r\n        existingCart[existingProductIndex].quantity += 1;\r\n        updatedCart = existingCart;\r\n      } else {\r\n        updatedCart = [...existingCart, { ...product, quantity: 1 }];\r\n      }\r\n    } else {\r\n      updatedCart = [{ ...product, quantity: 1 }];\r\n    }\r\n\r\n    await setDoc(userCartRef, { items: updatedCart });\r\n    dispatch(setCartItems(updatedCart));\r\n    toast.success(\"Product added to cart!\");\r\n  } catch (error) {\r\n    console.error(\"Error adding to cart: \", error);\r\n    toast.error(\"Failed to add product to cart\");\r\n  }\r\n};\r\n\r\n  \r\n\r\nexport const removeProductFromCart = (productId) => async (dispatch, getState) => {\r\n  try {\r\n    \r\n  } catch (error) {\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,uBAAuB;AAC1C,SAASC,YAAY,EAAEC,mBAAmB,QAAQ,yBAAyB;AAC3E,SAASC,GAAG,EAAEC,MAAM,EAAEC,MAAM,QAAQ,oBAAoB;AACxD,SAASC,KAAK,QAAQ,gBAAgB;AAGtC,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,OAAO,EAAEC,MAAM,KAAK,MAAOC,QAAQ,IAAK;EACxE,IAAI;IACF,MAAMC,WAAW,GAAGR,GAAG,CAACH,EAAE,EAAE,OAAO,EAAES,MAAM,CAAC;IAC5C,MAAMG,OAAO,GAAG,MAAMR,MAAM,CAACO,WAAW,CAAC;IACzC,IAAIE,WAAW,GAAG,EAAE;IAEpB,IAAID,OAAO,CAACE,MAAM,CAAC,CAAC,EAAE;MACpB,MAAMC,YAAY,GAAGH,OAAO,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,IAAI,EAAE;MAC/C,MAAMC,oBAAoB,GAAGH,YAAY,CAACI,SAAS,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKb,OAAO,CAACa,EAAE,CAAC;MAEnF,IAAIH,oBAAoB,KAAK,CAAC,CAAC,EAAE;QAC/BH,YAAY,CAACG,oBAAoB,CAAC,CAACI,QAAQ,IAAI,CAAC;QAChDT,WAAW,GAAGE,YAAY;MAC5B,CAAC,MAAM;QACLF,WAAW,GAAG,CAAC,GAAGE,YAAY,EAAE;UAAE,GAAGP,OAAO;UAAEc,QAAQ,EAAE;QAAE,CAAC,CAAC;MAC9D;IACF,CAAC,MAAM;MACLT,WAAW,GAAG,CAAC;QAAE,GAAGL,OAAO;QAAEc,QAAQ,EAAE;MAAE,CAAC,CAAC;IAC7C;IAEA,MAAMjB,MAAM,CAACM,WAAW,EAAE;MAAEM,KAAK,EAAEJ;IAAY,CAAC,CAAC;IACjDH,QAAQ,CAACT,YAAY,CAACY,WAAW,CAAC,CAAC;IACnCP,KAAK,CAACiB,OAAO,CAAC,wBAAwB,CAAC;EACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC9ClB,KAAK,CAACkB,KAAK,CAAC,+BAA+B,CAAC;EAC9C;AACF,CAAC;AAID,OAAO,MAAME,qBAAqB,GAAIC,SAAS,IAAK,OAAOjB,QAAQ,EAAEkB,QAAQ,KAAK;EAChF,IAAI,CAEJ,CAAC,CAAC,OAAOJ,KAAK,EAAE,CAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}